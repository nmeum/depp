<!DOCTYPE html>
<html lang="en">
	{{- $base := (relIndex .CurrentFile) -}}
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">

		<title>{{ .Title }}</title>
		<link rel="stylesheet" href="{{ $base }}style.css">
	</head>
	<body>
		<header>
			<h1><a href="{{ $base }}index.html">{{ .Title }}</a></h1>
			{{ if .Description -}}
				<p>{{ .Description }}</p>
			{{- end }}
			<pre>git clone <code>{{ .URL }}/{{ .Title}}.git</code></pre>
		</header>

		<main>
			{{ if (isIndexPage .) }}
				{{- $commits := (.Commits) -}}
				{{ if $commits }}
					{{ template "commits.tmpl" $commits }}
				{{ end }}
			{{ end }}

			{{ if .CurrentFile.IsDir }}
				{{ template "tree.tmpl" . }}
			{{ else }}
				{{ template "blob.tmpl" . }}
			{{ end }}

			{{- $readme := (renderReadme .) -}}
			{{ if $readme }}
				{{ template "readme.tmpl" $readme }}
			{{ end }}
		</main>
	</body>
</html>
