<!DOCTYPE html>
<html lang="en">
	{{- $base := (relIndex .CurrentFile) -}}
	<head>
		<meta charset="UTF-8" />
		<title>{{ .Title }}</title>
		<link rel="stylesheet" href="{{ $base }}style.css">
	</head>
	<body>
		<header>
			<h1><a href="{{ $base }}index.html">{{ .Title }}</a></h1>
			<pre>git clone {{ .URL }}/{{ .Title }}.git</pre>
		</header>

		<main>
			{{ if (isIndexPage .) }}
				{{- $commits := (.Commits) -}}
				{{ if $commits }}
					{{ template "commits.tmpl" $commits }}
				{{ end }}
			{{ end }}

			{{ if .CurrentFile.IsDir }}
				{{ template "tree.tmpl" . }}
			{{ else }}
				{{ template "blob.tmpl" . }}
			{{ end }}

			{{ if (isIndexPage .) }}
				{{- $readme := (renderReadme .) -}}
				{{ if $readme }}
					{{ template "readme.tmpl" $readme }}
				{{ end }}
			{{ end }}
		</main>
	</body>
</html>
